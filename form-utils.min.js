function initMasks(){document.querySelectorAll("input[mask]").forEach((e=>{const t=e.getAttribute("mask");e.addEventListener("input",(e=>{const n=e.target.value;let r="",o=0;for(let e=0;e<t.length&&o<n.length;e++){const a=t[e],i=n[o];"9"===a?(/\d/.test(i)?r+=i:e--,o++):"A"===a?(/[a-zA-Z]/.test(i)?r+=i:e--,o++):"*"===a?(r+=i,o++):(r+=a,i===a&&o++)}e.target.value=r}))}))}function initCaseTransform(){Object.entries({lowercase:e=>e.toLowerCase(),uppercase:e=>e.toUpperCase(),capitalize:e=>e.replace(/\b\w/g,(e=>e.toUpperCase()))}).forEach((([e,t])=>{document.querySelectorAll(`input[${e}],textarea[${e}]`).forEach((e=>{e.addEventListener("input",(()=>{e.value=t(e.value)}))}))}))}function initFloatFields(){document.querySelectorAll("input[float]:not([data-float-initialized])").forEach((e=>{const t=e.hasAttribute("min")?parseFloat(e.getAttribute("min")):null,n=e.hasAttribute("max")?parseFloat(e.getAttribute("max")):null,r=e=>e.toFixed(2).replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.");e.type="text",e.addEventListener("input",(e=>{const t=e.target.value.replace(/\D/g,"");if(!t)return void(e.target.value="");let o=parseFloat(t)/100;null!==n&&o>n&&(o=n),e.target.value=r(o)})),e.addEventListener("blur",(e=>{if(!e.target.value)return;const n=parseFloat(e.target.value.replace(/\./g,"").replace(",","."))||0;null!==t&&n<t&&(e.target.value=r(t))})),e.dataset.floatInitialized="true"}))}function initAutoTrim(){document.querySelectorAll("input, textarea").forEach((e=>{e.addEventListener("blur",(()=>{e.value=e.value.trim()}))}))}const EYE_ICON='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg>',EYE_SLASH_ICON='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88" /></svg>';function initFilePreview(){document.querySelectorAll("[file-preview]").forEach((e=>{const t=e.getAttribute("file-preview"),n=document.querySelector(`[name="${t}"], #${t}`);n&&"file"===n.type&&n.addEventListener("change",(()=>{e.innerHTML="",[...n.files].forEach((t=>{const n=document.createElement("div");if(n.setAttribute("data-file",t.name),t.type.startsWith("image/")){const e=document.createElement("img");e.src=URL.createObjectURL(t),e.onload=()=>URL.revokeObjectURL(e.src),n.appendChild(e)}else{const e=document.createElement("span");e.textContent=t.name;const r=document.createElement("small");r.textContent=t.size>1048576?(t.size/1024/1024).toFixed(1)+" MB":(t.size/1024).toFixed(1)+" KB",n.appendChild(e),n.appendChild(r)}e.appendChild(n)}))}))}))}function initCopyInput(){document.querySelectorAll("[copy-input]").forEach((e=>{const t=e.getAttribute("copy-input"),n=e.getAttribute("copy-input-update"),r=e.innerHTML,o=document.querySelector(`[name="${t}"], #${t}`);o&&e.addEventListener("click",(()=>{navigator.clipboard.writeText(o.value).then((()=>{n&&(e.innerHTML=n,setTimeout((()=>e.innerHTML=r),2e3))}))}))}))}function initStrength(){document.querySelectorAll("[strength]").forEach((e=>{const t=e.getAttribute("strength"),n=(e.getAttribute("strength-messages")||"Weak;Fair;Strong;Very strong").split(";"),r=document.querySelector(`[name="${t}"], #${t}`);r&&r.addEventListener("input",(()=>{const t=r.value;if(0===t.length)return e.textContent="",void e.removeAttribute("data-strength");let o=0;t.length>=8&&o++,/[A-Z]/.test(t)&&o++,/[0-9]/.test(t)&&o++,/[^A-Za-z0-9]/.test(t)&&o++;const a=Math.min(o,n.length-1);e.textContent=n[a],e.setAttribute("data-strength",o+1)}))}))}function initShowPassword(){document.querySelectorAll("[show-password]").forEach((e=>{const t=e.getAttribute("show-password"),n=document.querySelector(`[name="${t}"], #${t}`);if(!n)return;e.innerHTML=EYE_ICON;let r=!1;e.addEventListener("click",(()=>{r=!r,n.type=r?"text":"password",e.innerHTML=r?EYE_SLASH_ICON:EYE_ICON}))}))}function initCountdown(){document.querySelectorAll("[countdown]").forEach((e=>{const t=e.getAttribute("countdown"),[n,r="00:00:00"]=t.split("T"),[o,a,i]=n.split("-").map(Number),[l=0,s=0,u=0]=r.split(":").map(Number),c=new Date(o,a-1,i,l,s,u),d=e.getAttribute("countdown-days")||"days",p=e.getAttribute("countdown-hours")||"hours",m=e.getAttribute("countdown-minutes")||"minutes",v=e.getAttribute("countdown-seconds")||"seconds",g=()=>{const t=c-Date.now();if(t<=0)return void(e.textContent=e.getAttribute("countdown-done")||"00:00:00:00");const n=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),o=Math.floor(t%36e5/6e4),a=Math.floor(t%6e4/1e3),i=e=>String(e).padStart(2,"0");e.innerHTML=`<span>${i(n)}<small>${d}</small></span><span>${i(r)}<small>${p}</small></span><span>${i(o)}<small>${m}</small></span><span>${i(a)}<small>${v}</small></span>`};g(),setInterval(g,1e3)}))}function initClearInput(){document.querySelectorAll("[clear-input]").forEach((e=>{const t=e.getAttribute("clear-input"),n=document.querySelector(`[name="${t}"], #${t}`);n&&e.addEventListener("click",(()=>{n.value="",n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),n.focus()}))}))}function initCountChar(){document.querySelectorAll("[count-char]").forEach((e=>{const t=e.getAttribute("count-char"),n=e.getAttribute("count-char-max"),r=document.querySelector(`[name="${t}"], #${t}`);if(!r)return;const o=()=>{const t=r.value.length;e.textContent=n?`${t} / ${n}`:t,n&&e.setAttribute("data-over",t>parseInt(n))};o(),r.addEventListener("input",o)}))}function initAutosave(){document.querySelectorAll("form[autosave]").forEach((e=>{const t="autosave:"+e.getAttribute("autosave"),n=()=>e.querySelectorAll("input, textarea, select"),r=()=>{const e={};n().forEach((t=>{t.name&&(e[t.name]=t.value)})),localStorage.setItem(t,JSON.stringify(e))};(()=>{try{const e=JSON.parse(localStorage.getItem(t));if(!e)return;n().forEach((t=>{t.name&&void 0!==e[t.name]&&(t.value=e[t.name])}))}catch{}})(),e.addEventListener("input",r),e.addEventListener("change",r),e.addEventListener("reset",(()=>{localStorage.removeItem(t)})),e.addEventListener("submit",(()=>{localStorage.removeItem(t)}))}))}function initDirtyWarning(){document.querySelectorAll("form[dirty-warning]").forEach((e=>{const t=e.getAttribute("dirty-warning")||"You have unsaved changes. Are you sure you want to leave?";let n=!1;e.addEventListener("input",(()=>{n=!0})),e.addEventListener("change",(()=>{n=!0})),e.addEventListener("submit",(()=>{n=!1})),e.addEventListener("reset",(()=>{n=!1})),window.addEventListener("beforeunload",(e=>{n&&(e.preventDefault(),e.returnValue=t)}))}))}function initOnlyLetters(){document.querySelectorAll("input[only-letters]").forEach((e=>{e.addEventListener("keypress",(e=>{/[a-zA-ZÀ-ÿ\s]/.test(e.key)||e.preventDefault()})),e.addEventListener("input",(()=>{e.value=e.value.replace(/[^a-zA-ZÀ-ÿ\s]/g,"")}))}))}function initOnlyNumbers(){document.querySelectorAll("input[only-numbers]").forEach((e=>{e.addEventListener("keypress",(e=>{/[0-9]/.test(e.key)||e.preventDefault()})),e.addEventListener("input",(()=>{e.value=e.value.replace(/[^0-9]/g,"")}))}))}const ALERT_ICON='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="24" height="24">\n  <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />\n</svg>';function error(e,t){const n=document.querySelector(`[name="${e}"], #${e}`);if(!n)return;n.style.borderColor="#e53e3e",n.style.outline="none",n.style.boxShadow="0 0 0 3px rgba(229,62,62,0.15)",n.setAttribute("aria-invalid","true");const r=n.parentElement.querySelector(`[data-error-for="${e}"]`);r&&r.remove();const o=document.createElement("div");o.setAttribute("data-error-for",e),o.setAttribute("role","alert"),o.style.cssText="display:flex;align-items:center;gap:0.3rem;color:#e53e3e;font-size:0.82rem;margin-top:0.35rem;font-family:sans-serif;",o.innerHTML=ALERT_ICON+`<span>${t}</span>`,n.insertAdjacentElement("afterend",o);const a=()=>{n.style.borderColor="",n.style.boxShadow="",n.removeAttribute("aria-invalid"),o.remove(),n.removeEventListener("input",a)};n.addEventListener("input",a)}initCountdown(),initClearInput(),initCountChar(),initFilePreview(),initCopyInput(),initStrength(),initShowPassword(),initMasks(),initCaseTransform(),initFloatFields(),initAutoTrim(),initAutosave(),initDirtyWarning(),initOnlyLetters(),initOnlyNumbers();